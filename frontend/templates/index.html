<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giharad RPG - Seleção</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="{{ url_for('static', path='css/style.css') }}?v=2" rel="stylesheet">
</head>
<body>
    
    <div class="header">
        <h1>Seleção de Personagem</h1>
        <a href="/novo" class="btn-novo">+ Criar Novo</a>
    </div>

    <div class="grid-row grid-3" style="max-width: 1000px; margin: 0 auto;">
        
        {% for ficha in personagens %}
            <a href="/ficha/{{ ficha.id }}" style="display: block; text-decoration: none;">
                <div class="card">
                    
                    <form action="/deletar/{{ ficha.id }}" method="post" onsubmit="return confirm('Deletar {{ ficha.nome }}?');" style="position: absolute; top: 10px; right: 10px; z-index: 10;">
                        <button type="submit" class="btn-delete" title="Excluir">
                            <span class="material-icons" style="font-size: 1.2em;">close</span>
                        </button>
                    </form>

                    <h2 style="font-size: 1.4em; margin-bottom: 5px;">{{ ficha.nome }}</h2>
                    <span class="tag" style="background: #ff9800; color: #000;">Nível {{ ficha.nivel }}</span>
                    <p style="color: #aaa; margin: 10px 0;">{{ ficha.raca }} - {{ ficha.classe }}</p>
                    
                    <div class="progress-track">
                        <div class="progress-fill fill-pv" style="width: {{ (ficha.pv_atual / ficha.pv_max * 100)|int if ficha.pv_max > 0 else 0 }}%;"></div>
                    </div>
                    <span style="font-size: 0.7em; color: #666; float: right; margin-top: 2px;">PV: {{ ficha.pv_atual }}/{{ ficha.pv_max }}</span>

                    <div class="progress-track">
                        <div class="progress-fill fill-pa" style="width: {{ (ficha.pa_atual / ficha.pa_max * 100)|int if ficha.pa_max > 0 else 0 }}%;"></div>
                    </div>
                    <span style="font-size: 0.7em; color: #666; float: right; margin-top: 2px;">PA: {{ ficha.pa_atual }}/{{ ficha.pa_max }}</span>

                    <div class="progress-track">
                        <div class="progress-fill fill-ph" style="width: {{ (ficha.ph_atual / ficha.ph_max * 100)|int if ficha.ph_max > 0 else 0 }}%;"></div>
                    </div>
                    <span style="font-size: 0.7em; color: #666; float: right; margin-top: 2px;">PH: {{ ficha.ph_atual }}/{{ ficha.ph_max }}</span>

                    <div class="progress-track">
                        <div class="progress-fill fill-pg" style="width: {{ (ficha.pg_atual / ficha.pg_max * 100)|int if ficha.pg_max > 0 else 0 }}%;"></div>
                    </div>
                    <span style="font-size: 0.7em; color: #666; float: right; margin-top: 2px;">PG: {{ ficha.pg_atual }}/{{ ficha.pg_max }}</span>

                </div>
            </a>
        {% else %}
            <p style="text-align:center; color: #666; grid-column: span 3;">Nenhum personagem encontrado... Crie um personagem!</p>
        {% endfor %}

    </div>
</div>

    <footer class="app-footer">
        <div class="footer-text">
            Feito por Thiago "DrSauce" - Alpha 0.1
        </div>
        <img src="{{ url_for('static', path='img/logo.png') }}" alt="Giharad RPG Logo" class="footer-logo">
    </footer>

</body>
</html>